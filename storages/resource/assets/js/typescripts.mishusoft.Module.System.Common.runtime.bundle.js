(self["webpackChunk"] = self["webpackChunk"] || []).push([["typescripts_mishusoft_Module_System_Common_ts"],{

/***/ "./typescripts/mishusoft/Module/System/Common.ts":
/*!*******************************************************!*\
  !*** ./typescripts/mishusoft/Module/System/Common.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Common": function() { return /* binding */ Common; }
/* harmony export */ });
var Common = /** @class */ (function () {
    function Common(appHost) {
        this.appHost = appHost;
    }
    Common.prototype.handleCommonEvent = function () {
        var self = this;
        __webpack_require__.e(/*! import() */ "typescripts_common_dom_ts").then(__webpack_require__.bind(__webpack_require__, /*! ../../../common/dom */ "./typescripts/common/dom.ts")).then(function (dom) {
            var captureElement = dom.captureElement;
            var createElement = dom.createElement;
            Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../common/request */ "./typescripts/common/request.ts")).then(function (request) {
                var sendRequest = request.sendRequest;
                Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../common/validation */ "./typescripts/common/validation.ts")).then(function (validation) {
                    var IsJsonString = validation.IsJsonString;
                    if (captureElement("#system-notification-viewer") !== undefined) {
                        sendRequest({
                            method: "GET",
                            url: self.appHost + 'api/getVisitorsAccessLogsLimited',
                            async: true,
                            header: [{ name: "Content-type", value: "application/json;charset=UTF-8" }],
                        }, function (response) {
                            if (response.length !== 0 && IsJsonString(response)) {
                                if (JSON.parse(response).length !== 0) {
                                    captureElement("#system-notification-viewer").textContent = '';
                                    JSON.parse(response).forEach(function (log) {
                                        var messageBody = createElement([{
                                                'a': {
                                                    'class': 'box-message ' + ((log.message_type.toLowerCase() === 'error') ? 'box-danger' : ((log.message_type.toLowerCase() === 'success') ? 'box-success' : ((log.message_type.toLowerCase() === 'notify') ? 'box-notify' : ' '))) + ' box-shadow-light',
                                                    /*'style': 'padding: 0 0 0 4px;',*/
                                                    'href': self.appHost + 'system/log/view/' + log.id,
                                                    'title': '[' + log.ip + '] [' + log.browser + '] [' + log.time + ']',
                                                }
                                            }]);
                                        var messageIcon = createElement([{
                                                'span': {
                                                    'class': ((log.message_type.toLowerCase() === 'error') ? 'box-danger-symbol' : ((log.message_type.toLowerCase() === 'success') ? 'box-success-symbol' : ((log.message_type.toLowerCase() === 'notify') ? 'box-notify-symbol' : ' '))),
                                                }
                                            }]);
                                        messageBody.appendChild(messageIcon);
                                        var messageIconFile = createElement([{
                                                'i': {
                                                    'class': ((log.message_type.toLowerCase() === 'error') ? 'fa fa-times' : ((log.message_type.toLowerCase() === 'success') ? 'fa fa-check' : ((log.message_type.toLowerCase() === 'notify') ? 'fa fa-info' : ''))),
                                                }
                                            }]);
                                        messageIcon.appendChild(messageIconFile);
                                        var messageBodyContent = createElement([{ 'div': { 'class': (captureElement('#notify') !== undefined) ? captureElement('#notify').value : 'notify-md-content', } }]);
                                        messageBody.appendChild(messageBodyContent);
                                        var ipLink = createElement([{
                                                'a': {
                                                    'class': 'link',
                                                    'href': self.appHost + 'addons/ipinfo/' + log.ip,
                                                }
                                            }]);
                                        ipLink.textContent = log.author + ' with ' + log.browser /*+  ' from ' + log.country*/;
                                        messageBodyContent.appendChild(ipLink);
                                        var contentLink = createElement([{ 'span': { 'class': 'link', } }]);
                                        messageBodyContent.appendChild(contentLink);
                                        var content = createElement([{ 'p': { 'class': 'link', } }]);
                                        content.textContent = log.message.replace(/\s*\<.*?\>\s*/g, ' ').substr(0, 35) + '...';
                                        messageBodyContent.appendChild(content);
                                        captureElement("#system-notification-viewer").appendChild(messageBody);
                                    });
                                }
                                else {
                                    captureElement("#system-notification-viewer").textContent = '';
                                    var messageBody = createElement([{
                                            'div': {
                                                'class': 'box-message box-danger box-shadow-light',
                                                /*'style': 'padding: 0 0 0 4px;',*/
                                            }
                                        }]);
                                    var messageIcon = createElement([{
                                            'span': {
                                                'class': 'box-danger-symbol',
                                            }
                                        }]);
                                    messageBody.appendChild(messageIcon);
                                    var messageIconFile = createElement([{
                                            'i': {
                                                'class': 'fa fa-times',
                                            }
                                        }]);
                                    messageIcon.appendChild(messageIconFile);
                                    var messageBodyContent = createElement([{ 'div': { 'class': 'notify-md-content', } }]);
                                    messageBodyContent.textContent = 'No notification found.';
                                    messageBody.appendChild(messageBodyContent);
                                    captureElement("#system-notification-viewer").appendChild(messageBody);
                                }
                            }
                        });
                    }
                    if (captureElement("#system-contact-message-viewer") !== undefined) {
                        sendRequest({
                            method: "GET",
                            url: self.appHost + 'api/getContactMessagesLimited',
                            async: true,
                            header: [{ name: "Content-type", value: "application/json;charset=UTF-8" }],
                        }, function (response) {
                            if (response.length !== 0 && IsJsonString(response)) {
                                if (JSON.parse(response).length !== 0) {
                                    captureElement("#system-contact-message-viewer").textContent = '';
                                    JSON.parse(response).forEach(function (message) {
                                        var messageBody = createElement([{
                                                'a': {
                                                    'class': 'box-message box-success box-shadow-light',
                                                    'href': self.appHost + 'system/contactmessage/view/' + message.id,
                                                }
                                            }]);
                                        var messageIcon = createElement([{
                                                'span': {
                                                    'class': 'box-success-symbol',
                                                }
                                            }]);
                                        messageBody.appendChild(messageIcon);
                                        var messageIconFile = createElement([{
                                                'i': {
                                                    'class': 'fa fa-check',
                                                }
                                            }]);
                                        messageIcon.appendChild(messageIconFile);
                                        var messageBodyContent = createElement([{ 'div': { 'class': (captureElement('#notify') !== undefined) ? captureElement('#notify').value : 'notify-md-content', } }]);
                                        messageBody.appendChild(messageBodyContent);
                                        var sender = createElement([{
                                                'a': {
                                                    'class': 'link',
                                                    /*'href': appHost + 'addons/ipinfo/' + message.ip,*/
                                                }
                                            }]);
                                        sender.textContent = message.f_name + ' ' + message.l_name + ' send a ' + message.subject;
                                        messageBodyContent.appendChild(sender);
                                        var content = createElement([{ 'p': {} }]);
                                        content.textContent = message.message;
                                        messageBodyContent.appendChild(content);
                                        captureElement("#system-contact-message-viewer").appendChild(messageBody);
                                    });
                                }
                                else {
                                    captureElement("#system-contact-message-viewer").textContent = '';
                                    var messageBody = createElement([{
                                            'div': {
                                                'class': 'box-message box-danger box-shadow-light',
                                                /*'style': 'padding: 0 0 0 4px;',*/
                                            }
                                        }]);
                                    var messageIcon = createElement([{
                                            'span': {
                                                'class': 'box-danger-symbol',
                                            }
                                        }]);
                                    messageBody.appendChild(messageIcon);
                                    var messageIconFile = createElement([{
                                            'i': {
                                                'class': 'fa fa-times',
                                            }
                                        }]);
                                    messageIcon.appendChild(messageIconFile);
                                    var messageBodyContent = createElement([{ 'div': { 'class': 'notify-md-content', } }]);
                                    messageBodyContent.textContent = 'No message found.';
                                    messageBody.appendChild(messageBodyContent);
                                    captureElement("#system-contact-message-viewer").appendChild(messageBody);
                                }
                            }
                        });
                    }
                    if (captureElement('#system-default-menus') !== undefined) {
                        sendRequest({
                            method: "GET",
                            url: self.appHost + 'system/index/getMainItemTabs',
                            async: true,
                            header: [{ name: "Content-type", value: "application/json;charset=UTF-8" }],
                        }, function (response) {
                            if (response.length !== 0 && IsJsonString(response)) {
                                if (JSON.parse(response).length !== 0) {
                                    captureElement("#system-default-menus").textContent = '';
                                    JSON.parse(response).forEach(function (menu) {
                                        var systemMenu = createElement([{
                                                'a': {
                                                    'class': 'thumbnail-md box-shadow-light',
                                                    'href': self.appHost + 'system/' + menu.url,
                                                    'title': menu.title,
                                                }
                                            }]);
                                        var systemMenuIcon = createElement([{ 'span': { 'class': 'thumbnail-image', } }]);
                                        systemMenu.appendChild(systemMenuIcon);
                                        var systemMenuIconFile = createElement([{ 'i': { 'class': menu.icon, } }]);
                                        systemMenuIcon.appendChild(systemMenuIconFile);
                                        var systemMenuName = createElement([{ 'div': { 'class': 'thumbnail-text', } }]);
                                        systemMenuName.textContent = menu.name;
                                        systemMenu.appendChild(systemMenuName);
                                        captureElement("#system-default-menus").appendChild(systemMenu);
                                    });
                                }
                                else {
                                    var systemMenu = createElement([{
                                            'div': {
                                                'class': 'thumbnail-md box-shadow-light',
                                                'style': 'padding: 45px 25px;',
                                            }
                                        }]);
                                    systemMenu.textContent = 'No menu exists.';
                                    captureElement("#system-default-menus").appendChild(systemMenu);
                                }
                            }
                        });
                    }
                    if (captureElement('#system-extra-menus') !== undefined) {
                        sendRequest({
                            method: "GET",
                            url: self.appHost + 'system/index/getExtraItemTabs',
                            async: true,
                            header: [{ name: "Content-type", value: "application/json;charset=UTF-8" }],
                        }, function (response) {
                            if (response.length !== 0 && IsJsonString(response)) {
                                if (JSON.parse(response).length !== 0) {
                                    captureElement('#system-extra-menus').textContent = '';
                                    JSON.parse(response).forEach(function (menu) {
                                        var extraMenu = createElement([{
                                                'a': {
                                                    'class': 'thumbnail-md box-shadow-light',
                                                    'href': self.appHost + 'system/' + menu.url,
                                                    'title': menu.title,
                                                }
                                            }]);
                                        var extraMenuIcon = createElement([{ 'span': { 'class': 'thumbnail-image', } }]);
                                        extraMenu.appendChild(extraMenuIcon);
                                        var extraMenuIconFile = createElement([{ 'i': { 'class': menu.icon, } }]);
                                        extraMenuIcon.appendChild(extraMenuIconFile);
                                        var extraMenuName = createElement([{ 'div': { 'class': 'thumbnail-text', } }]);
                                        extraMenuName.textContent = menu.name;
                                        extraMenu.appendChild(extraMenuName);
                                        captureElement("#system-extra-menus").appendChild(extraMenu);
                                    });
                                }
                                else {
                                    var extraMenu = createElement([{
                                            'div': {
                                                'class': 'thumbnail-md box-shadow-light',
                                                'style': 'padding: 45px 25px;',
                                            }
                                        }]);
                                    extraMenu.textContent = 'No menu exists.';
                                    captureElement("#system-extra-menus").appendChild(extraMenu);
                                }
                            }
                        });
                    }
                }).catch(function (err) {
                    console.log(err);
                });
            }).catch(function (err) {
                console.log(err);
            });
        }).catch(function (err) {
            console.log(err);
        });
    };
    return Common;
}());



/***/ })

}])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvdHlwZXNjcmlwdHMubWlzaHVzb2Z0Lk1vZHVsZS5TeXN0ZW0uQ29tbW9uLnJ1bnRpbWUuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0lBQ0ksZ0JBQ1ksT0FBZ0I7UUFBaEIsWUFBTyxHQUFQLE9BQU8sQ0FBUztJQUU1QixDQUFDO0lBRUQsa0NBQWlCLEdBQWpCO1FBQ0ksSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLGdMQUE2QixDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUc7WUFDNUMsSUFBSSxjQUFjLEdBQUcsR0FBRyxDQUFDLGNBQWMsQ0FBQztZQUN4QyxJQUFJLGFBQWEsR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDO1lBQ3RDLHNKQUFpQyxDQUFDLElBQUksQ0FBQyxVQUFVLE9BQU87Z0JBQ3BELElBQUksV0FBVyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7Z0JBQ3RDLDRKQUFvQyxDQUFDLElBQUksQ0FBQyxVQUFVLFVBQVU7b0JBQzFELElBQUksWUFBWSxHQUFHLFVBQVUsQ0FBQyxZQUFZLENBQUM7b0JBQzNDLElBQUksY0FBYyxDQUFDLDZCQUE2QixDQUFDLEtBQUssU0FBUyxFQUFFO3dCQUM3RCxXQUFXLENBQUM7NEJBQ1IsTUFBTSxFQUFFLEtBQUs7NEJBQ2IsR0FBRyxFQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsa0NBQWtDOzRCQUN0RCxLQUFLLEVBQUUsSUFBSTs0QkFDWCxNQUFNLEVBQUUsQ0FBQyxFQUFDLElBQUksRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFLGdDQUFnQyxFQUFDLENBQUM7eUJBQzVFLEVBQUUsVUFBVSxRQUFhOzRCQUN0QixJQUFJLFFBQVEsQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLFlBQVksQ0FBQyxRQUFRLENBQUMsRUFBRTtnQ0FDakQsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7b0NBQ25DLGNBQWMsQ0FBQyw2QkFB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LEtBQUssQ0FBQyxVQUFVLEdBQUc7Z0JBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDO1lBQ3BCLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRztZQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztRQUNwQixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFDTCxhQUFDO0FBQUQsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3R5cGVzY3JpcHRzL21pc2h1c29mdC9Nb2R1bGUvU3lzdGVtL0NvbW1vbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ29tbW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgYXBwSG9zdCA6IHN0cmluZ1xyXG4gICAgKSB7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ29tbW9uRXZlbnQoKXtcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgaW1wb3J0KCcuLi8uLi8uLi9jb21tb24vZG9tJykudGhlbihmdW5jdGlvbiAoZG9tKSB7XHJcbiAgICAgICAgICAgIGxldCBjYXB0dXJlRWxlbWVudCA9IGRvbS5jYXB0dXJlRWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IGNyZWF0ZUVsZW1lbnQgPSBkb20uY3JlYXRlRWxlbWVudDtcclxuICAgICAgICAgICAgaW1wb3J0KCcuLi8uLi8uLi9jb21tb24vcmVxdWVzdCcpLnRoZW4oZnVuY3Rpb24gKHJlcXVlc3QpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzZW5kUmVxdWVzdCA9IHJlcXVlc3Quc2VuZFJlcXVlc3Q7XHJcbiAgICAgICAgICAgICAgICBpbXBvcnQoJy4uLy4uLy4uL2NvbW1vbi92YWxpZGF0aW9uJykudGhlbihmdW5jdGlvbiAodmFsaWRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBJc0pzb25TdHJpbmcgPSB2YWxpZGF0aW9uLklzSnNvblN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdHVyZUVsZW1lbnQoXCIjc3lzdGVtLW5vdGlmaWNhdGlvbi12aWV3ZXJcIikgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVxdWVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHNlbGYuYXBwSG9zdCArICdhcGkvZ2V0VmlzaXRvcnNBY2Nlc3NMb2dzTGltaXRlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogW3tuYW1lOiBcIkNvbnRlbnQtdHlwZVwiLCB2YWx1ZTogXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIn1dLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2U6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmxlbmd0aCAhPT0gMCAmJiBJc0pzb25TdHJpbmcocmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEpTT04ucGFyc2UocmVzcG9uc2UpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlRWxlbWVudChcIiNzeXN0ZW0tbm90aWZpY2F0aW9uLXZpZXdlclwiKS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnBhcnNlKHJlc3BvbnNlKS5mb3JFYWNoKGZ1bmN0aW9uIChsb2c6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUJvZHkgPSBjcmVhdGVFbGVtZW50KFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdib3gtbWVzc2FnZSAnICsgKChsb2cubWVzc2FnZV90eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdlcnJvcicpID8gJ2JveC1kYW5nZXInIDogKChsb2cubWVzc2FnZV90eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdzdWNjZXNzJykgPyAnYm94LXN1Y2Nlc3MnIDogKChsb2cubWVzc2FnZV90eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdub3RpZnknKSA/ICdib3gtbm90aWZ5JyA6ICcgJykpKSArICcgYm94LXNoYWRvdy1saWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qJ3N0eWxlJzogJ3BhZGRpbmc6IDAgMCAwIDRweDsnLCovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdocmVmJzogc2VsZi5hcHBIb3N0ICsgJ3N5c3RlbS9sb2cvdmlldy8nICsgbG9nLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGl0bGUnOiAnWycgKyBsb2cuaXAgKyAnXSBbJyArIGxvZy5icm93c2VyICsgJ10gWycgKyBsb2cudGltZSArICddJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlSWNvbiA9IGNyZWF0ZUVsZW1lbnQoW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3Bhbic6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogKChsb2cubWVzc2FnZV90eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdlcnJvcicpID8gJ2JveC1kYW5nZXItc3ltYm9sJyA6ICgobG9nLm1lc3NhZ2VfdHlwZS50b0xvd2VyQ2FzZSgpID09PSAnc3VjY2VzcycpID8gJ2JveC1zdWNjZXNzLXN5bWJvbCcgOiAoKGxvZy5tZXNzYWdlX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ25vdGlmeScpID8gJ2JveC1ub3RpZnktc3ltYm9sJyA6ICcgJykpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQm9keS5hcHBlbmRDaGlsZChtZXNzYWdlSWNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlSWNvbkZpbGUgPSBjcmVhdGVFbGVtZW50KFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2knOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICgobG9nLm1lc3NhZ2VfdHlwZS50b0xvd2VyQ2FzZSgpID09PSAnZXJyb3InKSA/ICdmYSBmYS10aW1lcycgOiAoKGxvZy5tZXNzYWdlX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3N1Y2Nlc3MnKSA/ICdmYSBmYS1jaGVjaycgOiAoKGxvZy5tZXNzYWdlX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ25vdGlmeScpID8gJ2ZhIGZhLWluZm8nIDogJycpKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUljb24uYXBwZW5kQ2hpbGQobWVzc2FnZUljb25GaWxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQm9keUNvbnRlbnQgPSBjcmVhdGVFbGVtZW50KFt7J2Rpdic6IHsnY2xhc3MnOiAoY2FwdHVyZUVsZW1lbnQoJyNub3RpZnknKSAhPT0gdW5kZWZpbmVkKSA/IGNhcHR1cmVFbGVtZW50KCcjbm90aWZ5JykudmFsdWUgOiAnbm90aWZ5LW1kLWNvbnRlbnQnLH19XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQm9keS5hcHBlbmRDaGlsZChtZXNzYWdlQm9keUNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXBMaW5rID0gY3JlYXRlRWxlbWVudChbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAnbGluaycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdocmVmJzogc2VsZi5hcHBIb3N0ICsgJ2FkZG9ucy9pcGluZm8vJyArIGxvZy5pcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcExpbmsudGV4dENvbnRlbnQgPSBsb2cuYXV0aG9yICsgJyB3aXRoICcgKyBsb2cuYnJvd3NlciAvKisgICcgZnJvbSAnICsgbG9nLmNvdW50cnkqLztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb2R5Q29udGVudC5hcHBlbmRDaGlsZChpcExpbmspO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudExpbmsgPSBjcmVhdGVFbGVtZW50KFt7J3NwYW4nOiB7J2NsYXNzJzogJ2xpbmsnLH19XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQm9keUNvbnRlbnQuYXBwZW5kQ2hpbGQoY29udGVudExpbmspO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGNyZWF0ZUVsZW1lbnQoW3sncCc6IHsnY2xhc3MnOiAnbGluaycsfX1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQudGV4dENvbnRlbnQgPSBsb2cubWVzc2FnZS5yZXBsYWNlKC9cXHMqXFw8Lio/XFw+XFxzKi9nLCAnICcpLnN1YnN0cigwLCAzNSkgKyAnLi4uJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb2R5Q29udGVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVFbGVtZW50KFwiI3N5c3RlbS1ub3RpZmljYXRpb24tdmlld2VyXCIpLmFwcGVuZENoaWxkKG1lc3NhZ2VCb2R5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlRWxlbWVudChcIiNzeXN0ZW0tbm90aWZpY2F0aW9uLXZpZXdlclwiKS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQm9keSA9IGNyZWF0ZUVsZW1lbnQoW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2JveC1tZXNzYWdlIGJveC1kYW5nZXIgYm94LXNoYWRvdy1saWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyonc3R5bGUnOiAncGFkZGluZzogMCAwIDAgNHB4OycsKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlSWNvbiA9IGNyZWF0ZUVsZW1lbnQoW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdib3gtZGFuZ2VyLXN5bWJvbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJvZHkuYXBwZW5kQ2hpbGQobWVzc2FnZUljb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlSWNvbkZpbGUgPSBjcmVhdGVFbGVtZW50KFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAnZmEgZmEtdGltZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJY29uLmFwcGVuZENoaWxkKG1lc3NhZ2VJY29uRmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCb2R5Q29udGVudCA9IGNyZWF0ZUVsZW1lbnQoW3snZGl2JzogeydjbGFzcyc6ICdub3RpZnktbWQtY29udGVudCcsfX1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJvZHlDb250ZW50LnRleHRDb250ZW50ID0gJ05vIG5vdGlmaWNhdGlvbiBmb3VuZC4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQm9keS5hcHBlbmRDaGlsZChtZXNzYWdlQm9keUNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlRWxlbWVudChcIiNzeXN0ZW0tbm90aWZpY2F0aW9uLXZpZXdlclwiKS5hcHBlbmRDaGlsZChtZXNzYWdlQm9keSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXB0dXJlRWxlbWVudChcIiNzeXN0ZW0tY29udGFjdC1tZXNzYWdlLXZpZXdlclwiKSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRSZXF1ZXN0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VsZi5hcHBIb3N0ICsgJ2FwaS9nZXRDb250YWN0TWVzc2FnZXNMaW1pdGVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBbe25hbWU6IFwiQ29udGVudC10eXBlXCIsIHZhbHVlOiBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwifV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZTogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubGVuZ3RoICE9PSAwICYmIElzSnNvblN0cmluZyhyZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoSlNPTi5wYXJzZShyZXNwb25zZSkubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVFbGVtZW50KFwiI3N5c3RlbS1jb250YWN0LW1lc3NhZ2Utdmlld2VyXCIpLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTT04ucGFyc2UocmVzcG9uc2UpLmZvckVhY2goZnVuY3Rpb24gKG1lc3NhZ2U6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUJvZHkgPSBjcmVhdGVFbGVtZW50KFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdib3gtbWVzc2FnZSBib3gtc3VjY2VzcyBib3gtc2hhZG93LWxpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hyZWYnOiBzZWxmLmFwcEhvc3QgKyAnc3lzdGVtL2NvbnRhY3RtZXNzYWdlL3ZpZXcvJyArIG1lc3NhZ2UuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUljb24gPSBjcmVhdGVFbGVtZW50KFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NwYW4nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdib3gtc3VjY2Vzcy1zeW1ib2wnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb2R5LmFwcGVuZENoaWxkKG1lc3NhZ2VJY29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VJY29uRmlsZSA9IGNyZWF0ZUVsZW1lbnQoW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2ZhIGZhLWNoZWNrJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlSWNvbi5hcHBlbmRDaGlsZChtZXNzYWdlSWNvbkZpbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCb2R5Q29udGVudCA9IGNyZWF0ZUVsZW1lbnQoW3snZGl2JzogeydjbGFzcyc6IChjYXB0dXJlRWxlbWVudCgnI25vdGlmeScpICE9PSB1bmRlZmluZWQpID8gY2FwdHVyZUVsZW1lbnQoJyNub3RpZnknKS52YWx1ZSA6ICdub3RpZnktbWQtY29udGVudCcsfX1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb2R5LmFwcGVuZENoaWxkKG1lc3NhZ2VCb2R5Q29udGVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VuZGVyID0gY3JlYXRlRWxlbWVudChbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAnbGluaycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qJ2hyZWYnOiBhcHBIb3N0ICsgJ2FkZG9ucy9pcGluZm8vJyArIG1lc3NhZ2UuaXAsKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXIudGV4dENvbnRlbnQgPSBtZXNzYWdlLmZfbmFtZSArICcgJyArIG1lc3NhZ2UubF9uYW1lICsgJyBzZW5kIGEgJyArIG1lc3NhZ2Uuc3ViamVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb2R5Q29udGVudC5hcHBlbmRDaGlsZChzZW5kZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGNyZWF0ZUVsZW1lbnQoW3sncCc6IHt9fV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2UubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb2R5Q29udGVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVFbGVtZW50KFwiI3N5c3RlbS1jb250YWN0LW1lc3NhZ2Utdmlld2VyXCIpLmFwcGVuZENoaWxkKG1lc3NhZ2VCb2R5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlRWxlbWVudChcIiNzeXN0ZW0tY29udGFjdC1tZXNzYWdlLXZpZXdlclwiKS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQm9keSA9IGNyZWF0ZUVsZW1lbnQoW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2JveC1tZXNzYWdlIGJveC1kYW5nZXIgYm94LXNoYWRvdy1saWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyonc3R5bGUnOiAncGFkZGluZzogMCAwIDAgNHB4OycsKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlSWNvbiA9IGNyZWF0ZUVsZW1lbnQoW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdib3gtZGFuZ2VyLXN5bWJvbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJvZHkuYXBwZW5kQ2hpbGQobWVzc2FnZUljb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlSWNvbkZpbGUgPSBjcmVhdGVFbGVtZW50KFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAnZmEgZmEtdGltZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJY29uLmFwcGVuZENoaWxkKG1lc3NhZ2VJY29uRmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCb2R5Q29udGVudCA9IGNyZWF0ZUVsZW1lbnQoW3snZGl2JzogeydjbGFzcyc6ICdub3RpZnktbWQtY29udGVudCcsfX1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJvZHlDb250ZW50LnRleHRDb250ZW50ID0gJ05vIG1lc3NhZ2UgZm91bmQuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJvZHkuYXBwZW5kQ2hpbGQobWVzc2FnZUJvZHlDb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyZUVsZW1lbnQoXCIjc3lzdGVtLWNvbnRhY3QtbWVzc2FnZS12aWV3ZXJcIikuYXBwZW5kQ2hpbGQobWVzc2FnZUJvZHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdHVyZUVsZW1lbnQoJyNzeXN0ZW0tZGVmYXVsdC1tZW51cycpICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFJlcXVlc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzZWxmLmFwcEhvc3QgKyAnc3lzdGVtL2luZGV4L2dldE1haW5JdGVtVGFicycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogW3tuYW1lOiBcIkNvbnRlbnQtdHlwZVwiLCB2YWx1ZTogXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIn1dLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2U6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmxlbmd0aCAhPT0gMCAmJiBJc0pzb25TdHJpbmcocmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEpTT04ucGFyc2UocmVzcG9uc2UpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlRWxlbWVudChcIiNzeXN0ZW0tZGVmYXVsdC1tZW51c1wiKS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnBhcnNlKHJlc3BvbnNlKS5mb3JFYWNoKGZ1bmN0aW9uIChtZW51OiBhbnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN5c3RlbU1lbnUgPSBjcmVhdGVFbGVtZW50KFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2EnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICd0aHVtYm5haWwtbWQgYm94LXNoYWRvdy1saWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdocmVmJzogc2VsZi5hcHBIb3N0ICsgJ3N5c3RlbS8nICsgbWVudS51cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0aXRsZSc6IG1lbnUudGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3lzdGVtTWVudUljb24gPSBjcmVhdGVFbGVtZW50KFt7J3NwYW4nOiB7J2NsYXNzJzogJ3RodW1ibmFpbC1pbWFnZScsfX1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbU1lbnUuYXBwZW5kQ2hpbGQoc3lzdGVtTWVudUljb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3lzdGVtTWVudUljb25GaWxlID0gY3JlYXRlRWxlbWVudChbeydpJzogeydjbGFzcyc6IG1lbnUuaWNvbix9fV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtTWVudUljb24uYXBwZW5kQ2hpbGQoc3lzdGVtTWVudUljb25GaWxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzeXN0ZW1NZW51TmFtZSA9IGNyZWF0ZUVsZW1lbnQoW3snZGl2JzogeydjbGFzcyc6ICd0aHVtYm5haWwtdGV4dCcsfX1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbU1lbnVOYW1lLnRleHRDb250ZW50ID0gbWVudS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtTWVudS5hcHBlbmRDaGlsZChzeXN0ZW1NZW51TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlRWxlbWVudChcIiNzeXN0ZW0tZGVmYXVsdC1tZW51c1wiKS5hcHBlbmRDaGlsZChzeXN0ZW1NZW51KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3lzdGVtTWVudSA9IGNyZWF0ZUVsZW1lbnQoW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ3RodW1ibmFpbC1tZCBib3gtc2hhZG93LWxpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3R5bGUnOiAncGFkZGluZzogNDVweCAyNXB4OycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtTWVudS50ZXh0Q29udGVudCA9ICdObyBtZW51IGV4aXN0cy4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlRWxlbWVudChcIiNzeXN0ZW0tZGVmYXVsdC1tZW51c1wiKS5hcHBlbmRDaGlsZChzeXN0ZW1NZW51KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcHR1cmVFbGVtZW50KCcjc3lzdGVtLWV4dHJhLW1lbnVzJykgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVxdWVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHNlbGYuYXBwSG9zdCArICdzeXN0ZW0vaW5kZXgvZ2V0RXh0cmFJdGVtVGFicycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogW3tuYW1lOiBcIkNvbnRlbnQtdHlwZVwiLCB2YWx1ZTogXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIn1dLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2U6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmxlbmd0aCAhPT0gMCAmJiBJc0pzb25TdHJpbmcocmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEpTT04ucGFyc2UocmVzcG9uc2UpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlRWxlbWVudCgnI3N5c3RlbS1leHRyYS1tZW51cycpLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTT04ucGFyc2UocmVzcG9uc2UpLmZvckVhY2goZnVuY3Rpb24gKG1lbnU6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0cmFNZW51ID0gY3JlYXRlRWxlbWVudChbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAndGh1bWJuYWlsLW1kIGJveC1zaGFkb3ctbGlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaHJlZic6IHNlbGYuYXBwSG9zdCArICdzeXN0ZW0vJyArIG1lbnUudXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGl0bGUnOiBtZW51LnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4dHJhTWVudUljb24gPSBjcmVhdGVFbGVtZW50KFt7J3NwYW4nOiB7J2NsYXNzJzogJ3RodW1ibmFpbC1pbWFnZScsfX1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhTWVudS5hcHBlbmRDaGlsZChleHRyYU1lbnVJY29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4dHJhTWVudUljb25GaWxlID0gY3JlYXRlRWxlbWVudChbeydpJzogeydjbGFzcyc6IG1lbnUuaWNvbix9fV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFNZW51SWNvbi5hcHBlbmRDaGlsZChleHRyYU1lbnVJY29uRmlsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0cmFNZW51TmFtZSA9IGNyZWF0ZUVsZW1lbnQoW3snZGl2JzogeydjbGFzcyc6ICd0aHVtYm5haWwtdGV4dCcsfX1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhTWVudU5hbWUudGV4dENvbnRlbnQgPSBtZW51Lm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYU1lbnUuYXBwZW5kQ2hpbGQoZXh0cmFNZW51TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlRWxlbWVudChcIiNzeXN0ZW0tZXh0cmEtbWVudXNcIikuYXBwZW5kQ2hpbGQoZXh0cmFNZW51KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0cmFNZW51ID0gY3JlYXRlRWxlbWVudChbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Rpdic6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAndGh1bWJuYWlsLW1kIGJveC1zaGFkb3ctbGlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdHlsZSc6ICdwYWRkaW5nOiA0NXB4IDI1cHg7JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYU1lbnUudGV4dENvbnRlbnQgPSAnTm8gbWVudSBleGlzdHMuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyZUVsZW1lbnQoXCIjc3lzdGVtLWV4dHJhLW1lbnVzXCIpLmFwcGVuZENoaWxkKGV4dHJhTWVudSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=